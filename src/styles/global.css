@import "tailwindcss";

/* ============================================
   BLUEROBIN BLOG DESIGN SYSTEM
   Based on BlueRobin App v5.4 Design Tokens
   Floating Glass Interface with Neural Colors
   ============================================ */

@theme {
    /* ==================== COLOR PALETTE ==================== */
    /* Primary: Neural Blue-Purple (AI/Intelligence) - oklch for perceptual uniformity */
    --color-neural-50: oklch(96.5% 0.02 275);
    --color-neural-100: oklch(93% 0.04 275);
    --color-neural-200: oklch(87% 0.08 275);
    --color-neural-300: oklch(78% 0.12 275);
    --color-neural-400: oklch(68% 0.17 275);
    --color-neural-500: oklch(58% 0.20 275);
    --color-neural-600: oklch(52% 0.22 280);
    --color-neural-700: oklch(46% 0.21 280);
    --color-neural-800: oklch(40% 0.17 280);
    --color-neural-900: oklch(35% 0.14 280);

    /* Accent: Aurora Pink-Red (CTAs) - oklch for P3 gamut support */
    --color-aurora-50: oklch(97% 0.02 10);
    --color-aurora-100: oklch(93% 0.05 10);
    --color-aurora-200: oklch(88% 0.09 10);
    --color-aurora-300: oklch(78% 0.15 10);
    --color-aurora-400: oklch(68% 0.22 10);
    --color-aurora-500: oklch(60% 0.26 10);
    --color-aurora-600: oklch(52% 0.25 5);
    --color-aurora-700: oklch(45% 0.22 5);
    --color-aurora-800: oklch(40% 0.18 5);
    --color-aurora-900: oklch(35% 0.15 5);

    /* Secondary: Quantum Cyan (Info/Health) - oklch for wide gamut */
    --color-quantum-50: oklch(97% 0.02 195);
    --color-quantum-100: oklch(94% 0.05 195);
    --color-quantum-200: oklch(90% 0.10 195);
    --color-quantum-300: oklch(84% 0.14 195);
    --color-quantum-400: oklch(76% 0.16 195);
    --color-quantum-500: oklch(68% 0.15 195);
    --color-quantum-600: oklch(58% 0.13 195);
    --color-quantum-700: oklch(50% 0.11 195);
    --color-quantum-800: oklch(43% 0.09 195);
    --color-quantum-900: oklch(38% 0.07 195);

    /* Accent: Glow Amber (Warnings/Highlights) - oklch for consistent brightness */
    --color-glow-50: oklch(98% 0.03 85);
    --color-glow-100: oklch(95% 0.08 85);
    --color-glow-200: oklch(90% 0.14 85);
    --color-glow-300: oklch(85% 0.18 85);
    --color-glow-400: oklch(80% 0.18 80);
    --color-glow-500: oklch(74% 0.17 70);
    --color-glow-600: oklch(65% 0.16 60);
    --color-glow-700: oklch(55% 0.14 55);
    --color-glow-800: oklch(47% 0.11 50);
    --color-glow-900: oklch(40% 0.09 45);

    /* Neutrals: Slate (Refined Gray Scale) */
    --color-slate-50: #f8fafc;
    --color-slate-100: #f1f5f9;
    --color-slate-200: #e2e8f0;
    --color-slate-300: #cbd5e1;
    --color-slate-400: #94a3b8;
    --color-slate-500: #64748b;
    --color-slate-600: #475569;
    --color-slate-700: #334155;
    --color-slate-800: #1e293b;
    --color-slate-900: #0f172a;
    --color-slate-950: #020617;

    /* ==================== GLASSMORPHISM ==================== */
    --glass-white-10: rgba(255, 255, 255, 0.10);
    --glass-white-20: rgba(255, 255, 255, 0.20);
    --glass-white-30: rgba(255, 255, 255, 0.30);
    --glass-dark-10: rgba(15, 23, 42, 0.10);
    --glass-dark-20: rgba(15, 23, 42, 0.20);

    /* ==================== GRADIENTS ==================== */
    --gradient-neural: linear-gradient(135deg, #7069f5 0%, #6147ea 50%, #5337d5 100%);
    --gradient-aurora: linear-gradient(135deg, #ff6a8d 0%, #f83b69 50%, #e51e54 100%);
    --gradient-quantum: linear-gradient(135deg, #22d3ee 0%, #06b6d4 50%, #0891b2 100%);

    /* ==================== BORDER RADIUS ==================== */
    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.25rem;
    --radius-2xl: 1.5rem;

    /* ==================== SHADOWS ==================== */
    --shadow-sm: 0 2px 4px 0 rgba(15, 23, 42, 0.06), 0 1px 2px 0 rgba(15, 23, 42, 0.03);
    --shadow-md: 0 4px 12px 0 rgba(15, 23, 42, 0.08), 0 2px 4px 0 rgba(15, 23, 42, 0.04);
    --shadow-lg: 0 8px 24px 0 rgba(15, 23, 42, 0.10), 0 4px 8px 0 rgba(15, 23, 42, 0.05);
    --shadow-neural: 0 8px 32px -4px rgba(112, 105, 245, 0.3);

    /* ==================== TYPOGRAPHY ==================== */
    --font-sans: 'Inter var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-display: 'Cal Sans', 'SF Pro Display', system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', 'SF Mono', ui-monospace, monospace;

    /* ==================== ANIMATIONS ==================== */
    --ease-smooth: cubic-bezier(0.4, 0.0, 0.2, 1);
    --duration-normal: 250ms;
}

/* ==================== BASE STYLES ==================== */

html {
    @apply scroll-smooth;
}

body {
    @apply bg-slate-50 text-slate-800 antialiased;
    font-family: var(--font-sans);
}

/* Dark mode */
html.dark body {
    @apply bg-slate-900 text-slate-100;
}

/* ==================== TYPOGRAPHY ==================== */

h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    @apply font-bold tracking-tight;
}

code, pre {
    font-family: var(--font-mono);
}

/* ==================== PROSE STYLES ==================== */
/* Comprehensive typography for blog articles */

.prose {
    @apply max-w-none text-slate-700 leading-relaxed;
    font-size: 1rem;
    line-height: 1.7;
}

html.dark .prose {
    @apply text-slate-300;
}

/* Paragraphs */
.prose p {
    @apply mb-6;
}

.prose p:last-child {
    @apply mb-0;
}

/* Headings */
.prose h1 {
    @apply text-2xl sm:text-3xl font-bold text-slate-900 mt-10 mb-5;
    font-family: var(--font-display);
}

.prose h2 {
    @apply text-xl sm:text-2xl font-bold text-slate-900 mt-8 mb-3 pb-2 border-b border-slate-200;
    font-family: var(--font-display);
}

.prose h3 {
    @apply text-lg sm:text-xl font-semibold text-slate-800 mt-6 mb-2;
    font-family: var(--font-display);
}

.prose h4 {
    @apply text-base sm:text-lg font-semibold text-slate-800 mt-5 mb-2;
    font-family: var(--font-display);
}

html.dark .prose h1,
html.dark .prose h2,
html.dark .prose h3,
html.dark .prose h4 {
    @apply text-slate-100;
}

html.dark .prose h2 {
    @apply border-slate-700;
}

/* Links */
.prose a {
    @apply text-neural-600 underline decoration-neural-300/50 
           underline-offset-2 transition-all duration-200;
}

.prose a:hover {
    @apply text-neural-500 decoration-neural-500;
}

html.dark .prose a {
    @apply text-neural-400 decoration-neural-600/50;
}

html.dark .prose a:hover {
    @apply text-neural-300 decoration-neural-400;
}

/* Lists */
.prose ul {
    @apply my-6 ml-6 list-disc space-y-2;
}

.prose ol {
    @apply my-6 ml-6 list-decimal space-y-2;
}

.prose li {
    @apply pl-2;
}

.prose li > ul,
.prose li > ol {
    @apply my-2 ml-4;
}

/* Blockquotes */
.prose blockquote {
    @apply my-6 pl-6 border-l-4 border-neural-500 italic text-slate-600;
    quotes: none;
}

.prose blockquote p {
    @apply mb-0;
}

html.dark .prose blockquote {
    @apply text-slate-400 border-neural-400;
}

/* Horizontal Rules */
.prose hr {
    @apply my-10 border-slate-200;
}

html.dark .prose hr {
    @apply border-slate-700;
}

/* Images */
.prose img {
    @apply rounded-xl shadow-lg my-8 mx-auto;
}

/* Tables */
.prose table {
    @apply w-full my-8 text-sm border-collapse;
}

.prose thead {
    @apply bg-slate-100;
}

html.dark .prose thead {
    @apply bg-slate-800;
}

.prose th {
    @apply px-4 py-3 text-left font-semibold text-slate-900 border-b-2 border-slate-300;
}

html.dark .prose th {
    @apply text-slate-100 border-slate-600;
}

.prose td {
    @apply px-4 py-3 border-b border-slate-200;
}

html.dark .prose td {
    @apply border-slate-700;
}

.prose tbody tr:hover {
    @apply bg-slate-50;
}

html.dark .prose tbody tr:hover {
    @apply bg-slate-800/50;
}

/* Inline Code */
.prose code:not(pre code) {
    @apply px-1.5 py-0.5 rounded text-sm font-medium;
    background-color: rgba(112, 105, 245, 0.1);
    color: var(--color-neural-700);
}

html.dark .prose code:not(pre code) {
    background-color: rgba(112, 105, 245, 0.15);
    color: var(--color-neural-300);
}

/* Code Blocks - Soothing dark theme inspired by One Dark Pro */
.prose pre {
    @apply my-6 rounded-lg overflow-hidden;
    background-color: #1e2330 !important; /* Soft slate-blue dark */
    border: 1px solid rgba(99, 110, 140, 0.25);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

.prose pre code {
    @apply block px-4 py-3 overflow-x-auto text-xs;
    background: transparent !important;
    color: #abb2bf; /* One Dark text - easy on eyes */
    font-family: var(--font-mono);
    tab-size: 2;
    line-height: 1.4; /* Compact line spacing */
}

/* Shiki dual-theme: only swap text colors, not backgrounds */
html.dark .astro-code {
    background-color: #1e2330 !important;
}

html.dark .astro-code span {
    color: var(--shiki-dark) !important;
    background-color: transparent !important;
}

/* Line styling - compact and clean */
.prose pre code .line {
    display: block;
    min-height: 1.25em; /* Reduced for compactness */
    background: transparent !important;
}

/* All code blocks - compact line height */
.prose pre {
    line-height: 1.4 !important;
}

/* Light mode code blocks - soft warm light */
html:not(.dark) .prose pre {
    background-color: #fafbfc !important;
    border: 1px solid #e1e4e8;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
}

html:not(.dark) .prose pre code {
    color: #383a42;
    background: transparent !important;
    line-height: 1.4;
}

html:not(.dark) .astro-code span {
    background-color: transparent !important;
}

/* Strong and Emphasis */
.prose strong {
    @apply font-bold text-slate-900;
}

html.dark .prose strong {
    @apply text-slate-100;
}

.prose em {
    @apply italic;
}

/* First paragraph styling (lead) */
.prose > p:first-of-type {
    @apply text-base text-slate-600 leading-relaxed;
}

html.dark .prose > p:first-of-type {
    @apply text-slate-400;
}

/* ==================== GLASS CARD ==================== */
/* Glass card styles - use directly in classes, not with @apply */

.glass-card {
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
    border-radius: 0.75rem;
    border: 1px solid rgba(226, 232, 240, 0.5);
    box-shadow: var(--shadow-md);
}

html.dark .glass-card {
    background-color: rgba(30, 41, 59, 0.8);
    border-color: rgba(51, 65, 85, 0.5);
}

/* Dark glass card for dark hero sections */
.glass-card-dark {
    background-color: rgba(30, 41, 59, 0.6);
    backdrop-filter: blur(16px);
    border-radius: 1rem;
    border: 1px solid rgba(100, 116, 139, 0.2);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
}

.glass-card-dark:hover {
    background-color: rgba(30, 41, 59, 0.8);
    border-color: rgba(100, 116, 139, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -4px rgba(0, 0, 0, 0.2);
}

/* ==================== TAG STYLES ==================== */

.tag {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium
           bg-neural-100 text-neural-700 transition-colors;
}

.tag:hover {
    @apply bg-neural-200;
}

html.dark .tag {
    @apply bg-neural-900 text-neural-300;
}

html.dark .tag:hover {
    @apply bg-neural-800;
}

.tag-series {
    @apply bg-aurora-100 text-aurora-700;
}

.tag-series:hover {
    @apply bg-aurora-200;
}

html.dark .tag-series {
    @apply bg-aurora-900 text-aurora-300;
}

html.dark .tag-series:hover {
    @apply bg-aurora-800;
}

/* ==================== NAVIGATION ==================== */

.nav-link {
    @apply text-slate-600 transition-colors font-medium;
}

.nav-link:hover {
    @apply text-neural-600;
}

html.dark .nav-link {
    @apply text-slate-400;
}

html.dark .nav-link:hover {
    @apply text-neural-400;
}

.nav-link-active {
    @apply text-neural-600;
}

html.dark .nav-link-active {
    @apply text-neural-400;
}

/* ==================== BUTTONS ==================== */

.btn-primary {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg
           text-white font-medium transition-all shadow-md;
    background: linear-gradient(to right, var(--color-neural-600), var(--color-neural-700));
}

.btn-primary:hover {
    @apply shadow-lg;
    background: linear-gradient(to right, var(--color-neural-500), var(--color-neural-600));
}

.btn-secondary {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg
           bg-slate-200 text-slate-800 font-medium transition-colors;
}

.btn-secondary:hover {
    @apply bg-slate-300;
}

html.dark .btn-secondary {
    @apply bg-slate-700 text-slate-200;
}

html.dark .btn-secondary:hover {
    @apply bg-slate-600;
}

/* ==================== ARTICLE CARD ==================== */

.article-card {
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
    border-radius: 0.75rem;
    border: 1px solid rgba(226, 232, 240, 0.5);
    box-shadow: var(--shadow-md);
    padding: 1.5rem;
    transition: all 0.3s ease;
}

.article-card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-0.25rem);
}

html.dark .article-card {
    background-color: rgba(30, 41, 59, 0.8);
    border-color: rgba(51, 65, 85, 0.5);
}

.article-card h2 {
    @apply text-xl font-bold text-slate-900 mb-2 transition-colors;
}

.article-card h2:hover {
    @apply text-neural-600;
}

html.dark .article-card h2 {
    @apply text-slate-100;
}

html.dark .article-card h2:hover {
    @apply text-neural-400;
}

.article-card p {
    @apply text-slate-600 line-clamp-3;
}

html.dark .article-card p {
    @apply text-slate-400;
}

/* ==================== CITATION STYLES ==================== */

.citation {
    @apply text-sm text-slate-500 mt-4 pt-4 border-t border-slate-200;
}

html.dark .citation {
    @apply border-slate-700;
}

.citation a {
    @apply text-neural-600;
}

.citation a:hover {
    @apply underline;
}

html.dark .citation a {
    @apply text-neural-400;
}

.implementation-note {
    @apply text-sm italic text-glow-700;
}

html.dark .implementation-note {
    @apply text-glow-400;
}

.external-cite {
    @apply text-quantum-600;
}

html.dark .external-cite {
    @apply text-quantum-400;
}

/* ==================== CODE BLOCKS ==================== */

.code-filename {
    @apply bg-slate-800 text-slate-400 px-4 py-2 text-sm rounded-t-lg border-b border-slate-700;
    font-family: var(--font-mono);
}

.code-block {
    @apply rounded-b-lg;
}

/* ==================== SERIES NAVIGATION ==================== */

.series-nav {
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
    border-radius: 0.75rem;
    border: 1px solid rgba(226, 232, 240, 0.5);
    box-shadow: var(--shadow-md);
    padding: 1rem;
    margin: 2rem 0;
}

html.dark .series-nav {
    background-color: rgba(30, 41, 59, 0.8);
    border-color: rgba(51, 65, 85, 0.5);
}

.series-nav-title {
    @apply text-sm font-semibold text-aurora-600 uppercase tracking-wide mb-2;
}

html.dark .series-nav-title {
    @apply text-aurora-400;
}

.series-nav-list {
    @apply space-y-1;
}

.series-nav-item {
    @apply text-sm text-slate-600 transition-colors;
}

.series-nav-item:hover {
    @apply text-neural-600;
}

html.dark .series-nav-item {
    @apply text-slate-400;
}

html.dark .series-nav-item:hover {
    @apply text-neural-400;
}

.series-nav-item-active {
    @apply text-neural-600 font-medium;
}

html.dark .series-nav-item-active {
    @apply text-neural-400;
}

/* ==================== TABLE OF CONTENTS ==================== */

.toc {
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
    border-radius: 0.75rem;
    border: 1px solid rgba(226, 232, 240, 0.5);
    box-shadow: var(--shadow-md);
    padding: 1rem;
    position: sticky;
    top: 1rem;
}

html.dark .toc {
    background-color: rgba(30, 41, 59, 0.8);
    border-color: rgba(51, 65, 85, 0.5);
}

.toc-title {
    @apply text-sm font-semibold text-slate-900 uppercase tracking-wide mb-3;
}

html.dark .toc-title {
    @apply text-slate-100;
}

.toc a {
    @apply text-sm text-slate-600 block py-1 border-l-2 border-transparent pl-3 transition-colors;
}

.toc a:hover {
    @apply text-neural-600 border-neural-500;
}

html.dark .toc a {
    @apply text-slate-400;
}

html.dark .toc a:hover {
    @apply text-neural-400;
}

.toc a.active {
    @apply text-neural-600 border-neural-500;
}

html.dark .toc a.active {
    @apply text-neural-400;
}

/* ==================== DIFFICULTY BADGES ==================== */

.difficulty-beginner {
    @apply bg-emerald-100 text-emerald-700;
}

html.dark .difficulty-beginner {
    @apply bg-emerald-900 text-emerald-300;
}

.difficulty-intermediate {
    @apply bg-glow-100 text-glow-700;
}

html.dark .difficulty-intermediate {
    @apply bg-glow-900 text-glow-300;
}

.difficulty-advanced {
    @apply bg-aurora-100 text-aurora-700;
}

html.dark .difficulty-advanced {
    @apply bg-aurora-900 text-aurora-300;
}

/* ==================== CATEGORY BADGES ==================== */

.category-cookbook {
    @apply bg-quantum-100 text-quantum-700;
}

html.dark .category-cookbook {
    @apply bg-quantum-900 text-quantum-300;
}

.category-guide {
    @apply bg-neural-100 text-neural-700;
}

html.dark .category-guide {
    @apply bg-neural-900 text-neural-300;
}

.category-architecture {
    @apply bg-aurora-100 text-aurora-700;
}

html.dark .category-architecture {
    @apply bg-aurora-900 text-aurora-300;
}

.category-troubleshooting {
    @apply bg-glow-100 text-glow-700;
}

html.dark .category-troubleshooting {
    @apply bg-glow-900 text-glow-300;
}

/* ==================== CALLOUT STYLES ==================== */

.callout {
    @apply rounded-lg p-4 my-4 border-l-4;
}

.callout-info {
    @apply bg-neural-50 border-neural-500 text-neural-900;
}

html.dark .callout-info {
    @apply bg-neural-900/50 text-neural-100;
}

.callout-warning {
    @apply bg-glow-50 border-glow-500 text-glow-900;
}

html.dark .callout-warning {
    @apply bg-glow-900/50 text-glow-100;
}

.callout-tip {
    @apply bg-quantum-50 border-quantum-500 text-quantum-900;
}

html.dark .callout-tip {
    @apply bg-quantum-900/50 text-quantum-100;
}

.callout-danger {
    @apply bg-aurora-50 border-aurora-500 text-aurora-900;
}

html.dark .callout-danger {
    @apply bg-aurora-900/50 text-aurora-100;
}

/* ==================== MERMAID DIAGRAM FIXES ==================== */
/* 
   Mermaid uses foreignObjects with <p> tags for labels.
   The .prose styles add margins to <p> tags, causing labels to be cut off.
   We must reset these.
*/
.mermaid-diagram p {
    margin: 0 !important;
    padding: 0 !important;
    line-height: normal !important;
    font-size: 14px !important; 
}

.mermaid-diagram foreignObject {
    overflow: visible !important;
    line-height: normal !important; 
}

/* Force correct colors based on theme, ignoring Mermaid's inline styles */
html:not(.dark) .mermaid-diagram text,
html:not(.dark) .mermaid-diagram .nodeLabel, 
html:not(.dark) .mermaid-diagram .edgeLabel, 
html:not(.dark) .mermaid-diagram .label {
    fill: var(--color-slate-900) !important;
    color: var(--color-slate-900) !important;
}

html:not(.dark) .mermaid-diagram .node rect,
html:not(.dark) .mermaid-diagram .node circle,
html:not(.dark) .mermaid-diagram .node polygon,
html:not(.dark) .mermaid-diagram .node path {
    fill: var(--color-slate-50) !important;
    stroke: var(--color-slate-400) !important;
}

html:not(.dark) .mermaid-diagram .flowchart-link,
html:not(.dark) .mermaid-diagram .relation {
    stroke: var(--color-slate-500) !important;
}

html:not(.dark) .mermaid-diagram .marker {
    fill: var(--color-slate-500) !important;
    stroke: var(--color-slate-500) !important;
}

/* Dark Mode Overrides */
html.dark .mermaid-diagram text,
html.dark .mermaid-diagram .nodeLabel, 
html.dark .mermaid-diagram .edgeLabel, 
html.dark .mermaid-diagram .label {
    fill: var(--color-slate-200) !important;
    color: var(--color-slate-200) !important;
}

html.dark .mermaid-diagram .node rect,
html.dark .mermaid-diagram .node circle,
html.dark .mermaid-diagram .node polygon,
html.dark .mermaid-diagram .node path {
    fill: var(--color-slate-800) !important;
    stroke: var(--color-slate-500) !important;
}

html.dark .mermaid-diagram .flowchart-link,
html.dark .mermaid-diagram .relation {
    stroke: var(--color-slate-400) !important;
}

html.dark .mermaid-diagram .marker {
    fill: var(--color-slate-400) !important;
    stroke: var(--color-slate-400) !important;
}
