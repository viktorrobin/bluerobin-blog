uid=5_0 RootWebArea "Value Objects: Immutability and Self-Validation in C# | BlueRobin Tech Blog" url="http://localhost:4321/blog/ddd-value-objects-csharp/"
  uid=5_1 banner
    uid=5_2 navigation
      uid=5_3 link "BR BlueRobin Tech Blog" url="http://localhost:4321/"
        uid=5_4 StaticText "BR"
        uid=5_5 StaticText "BlueRobin Tech Blog"
      uid=5_6 link "Home" url="http://localhost:4321/"
        uid=5_7 StaticText "Home"
      uid=5_8 link "Blog" url="http://localhost:4321/blog/"
        uid=5_9 StaticText "Blog"
      uid=5_10 link "Cookbook" url="http://localhost:4321/cookbook/"
        uid=5_11 StaticText "Cookbook"
      uid=5_12 link "Architecture" url="http://localhost:4321/architecture/"
        uid=5_13 StaticText "Architecture"
      uid=5_14 link "Tags" url="http://localhost:4321/tags/"
        uid=5_15 StaticText "Tags"
      uid=5_16 link "About" url="http://localhost:4321/about/"
        uid=5_17 StaticText "About"
      uid=5_18 button "Toggle dark mode"
  uid=5_19 main
    uid=5_20 navigation
      uid=5_21 link "Home" url="http://localhost:4321/"
        uid=5_22 StaticText "Home"
      uid=5_23 StaticText " "
      uid=5_24 StaticText "/"
      uid=5_25 StaticText " "
      uid=5_26 link "Blog" url="http://localhost:4321/blog/"
        uid=5_27 StaticText "Blog"
      uid=5_28 StaticText " "
      uid=5_29 StaticText "/"
      uid=5_30 StaticText " "
      uid=5_31 link "Backend" url="http://localhost:4321/backend/"
        uid=5_32 StaticText "Backend"
    uid=5_33 StaticText "‚ö° Backend"
    uid=5_34 StaticText "Intermediate"
    uid=5_35 StaticText "‚è±Ô∏è 14 min"
    uid=5_36 heading "Value Objects: Immutability and Self-Validation in C#" level="1"
    uid=5_37 StaticText "Learn how to implement value objects with built-in validation, equality semantics, and EF Core persistence for a cleaner, more expressive domain model."
    uid=5_38 StaticText "By Victor Robin"
    uid=5_39 StaticText "‚Ä¢"
    uid=5_40 StaticText "January 26, 2026"
    uid=5_41 link "ddd" url="http://localhost:4321/tags/ddd/"
      uid=5_42 StaticText "ddd"
    uid=5_43 link "csharp" url="http://localhost:4321/tags/csharp/"
      uid=5_44 StaticText "csharp"
    uid=5_45 link "dotnet" url="http://localhost:4321/tags/dotnet/"
      uid=5_46 StaticText "dotnet"
    uid=5_47 link "value-objects" url="http://localhost:4321/tags/value-objects/"
      uid=5_48 StaticText "value-objects"
    uid=5_49 link "design-patterns" url="http://localhost:4321/tags/design-patterns/"
      uid=5_50 StaticText "design-patterns"
    uid=5_51 StaticText "Value objects are one of the most powerful yet underutilized tactical patterns in Domain-Driven Design. Unlike entities (which have identity), value objects are defined entirely by their attributes and are immutable once created. They are the building blocks of a rich domain model, encapsulating validation rules and behavior for concepts like email addresses, monetary amounts, or custom identifiers."
    uid=5_52 heading "Why Use Value Objects?" level="2"
    uid=5_53 StaticText "In many applications, we use primitive types ("
    uid=5_54 StaticText "string"
    uid=5_55 StaticText ", "
    uid=5_56 StaticText "int"
    uid=5_57 StaticText ", "
    uid=5_58 StaticText "decimal"
    uid=5_59 StaticText ") to represent domain concepts. This leads to ‚ÄúPrimitive Obsession,‚Äù where validation logic is scattered across services and controllers."
    uid=5_60 StaticText "Value Objects solve this by:"
    uid=5_61 StaticText "Enforcing Constraints"
    uid=5_62 StaticText ": An invalid Value Object cannot exist (e.g., an email without "
    uid=5_63 StaticText "@"
    uid=5_64 StaticText " symbol)."
    uid=5_65 StaticText "Encapsulating Logic"
    uid=5_66 StaticText ": Formatting, conversion, and equality logic live with the data."
    uid=5_67 StaticText "Improving Readability"
    uid=5_68 StaticText ": "
    uid=5_69 StaticText "EmailAddress"
    uid=5_70 StaticText " is more expressive than just "
    uid=5_71 StaticText "string"
    uid=5_72 StaticText "."
    uid=5_73 StaticText "Ensuring Immutability"
    uid=5_74 StaticText ": Once created, they cannot change, eliminating side effects."
    uid=5_75 StaticText "Aspect"
    uid=5_76 StaticText "Entity"
    uid=5_77 StaticText "Value Object"
    uid=5_78 StaticText "Identity"
    uid=5_79 StaticText "Unique identifier"
    uid=5_80 StaticText "No identity‚Äîdefined by attributes"
    uid=5_81 StaticText "Equality"
    uid=5_82 StaticText "Same ID = same entity"
    uid=5_83 StaticText "Same attributes = same value"
    uid=5_84 StaticText "Mutability"
    uid=5_85 StaticText "Can change over time"
    uid=5_86 StaticText "Immutable after creation"
    uid=5_87 StaticText "Examples"
    uid=5_88 StaticText "User, Document, Order"
    uid=5_89 StaticText "Email, Money, Address, BlueRobinId"
    uid=5_90 heading "Architecture Overview" level="2"
    uid=5_91 StaticText "The following diagram illustrates how Value Objects are composed within an Entity or Aggregate Root. Note that Value Objects have no identity of their own and are fully owned by the parent Entity."
    uid=5_92 StaticText "Composes"
    uid=5_93 StaticText "Composes"
    uid=5_94 StaticText "Composes"
    uid=5_95 StaticText "¬´Aggregate Root¬ª"
    uid=5_96 StaticText "AuditLog"
    uid=5_97 StaticText "+Guid Id"
    uid=5_98 StaticText "+BlueRobinId UserId"
    uid=5_99 StaticText "+AuditAction Action"
    uid=5_100 StaticText "+Timestamp OccurredAt"
    uid=5_101 StaticText "¬´Value Object¬ª"
    uid=5_102 StaticText "BlueRobinId"
    uid=5_103 StaticText "-string Value"
    uid=5_104 StaticText "+static Create(string) : Result"
    uid=5_105 StaticText "¬´Value Object¬ª"
    uid=5_106 StaticText "Timestamp"
    uid=5_107 StaticText "-DateTime Value"
    uid=5_108 StaticText "+static Now()"
    uid=5_109 StaticText "¬´Value Object¬ª"
    uid=5_110 StaticText "AuditAction"
    uid=5_111 StaticText "-string ActionType"
    uid=5_112 StaticText "-string Resource"
    uid=5_113 StaticText "+static Create(string, string) : Result"
    uid=5_114 heading "The Base Value Object Class" level="2"
    uid=5_115 StaticText "To implement structural equality (equality based on values, not references), we use a base class that overrides "
    uid=5_116 StaticText "Equals"
    uid=5_117 StaticText " and "
    uid=5_118 StaticText "GetHashCode"
    uid=5_119 StaticText "."
    uid=5_120 generic
      uid=5_121 StaticText "// Core/Common/ValueObject.cs"
      uid=5_122 StaticText "
"
      uid=5_123 StaticText "namespace"
      uid=5_124 StaticText " Archives"
      uid=5_125 StaticText "."
      uid=5_126 StaticText "Core"
      uid=5_127 StaticText "."
      uid=5_128 StaticText "Common"
      uid=5_129 StaticText ";"
      uid=5_130 StaticText "
"
      uid=5_131 StaticText "
"
      uid=5_132 StaticText "public"
      uid=5_133 StaticText " abstract"
      uid=5_134 StaticText " class"
      uid=5_135 StaticText " ValueObject"
      uid=5_136 StaticText " : "
      uid=5_137 StaticText "IEquatable"
      uid=5_138 StaticText "<"
      uid=5_139 StaticText "ValueObject"
      uid=5_140 StaticText ">"
      uid=5_141 StaticText "
"
      uid=5_142 StaticText "{"
      uid=5_143 StaticText "
"
      uid=5_144 StaticText "    // Derived classes return their atomic values here"
      uid=5_145 StaticText "
"
      uid=5_146 StaticText "    protected"
      uid=5_147 StaticText " abstract"
      uid=5_148 StaticText " IEnumerable"
      uid=5_149 StaticText "<"
      uid=5_150 StaticText "object"
      uid=5_151 StaticText "?> "
      uid=5_152 StaticText "GetEqualityComponents"
      uid=5_153 StaticText "();"
      uid=5_154 StaticText "
"
      uid=5_155 StaticText "    "
      uid=5_156 StaticText "
"
      uid=5_157 StaticText "    public"
      uid=5_158 StaticText " override"
      uid=5_159 StaticText " bool"
      uid=5_160 StaticText " Equals"
      uid=5_161 StaticText "("
      uid=5_162 StaticText "object"
      uid=5_163 StaticText "? "
      uid=5_164 StaticText "obj"
      uid=5_165 StaticText ")"
      uid=5_166 StaticText "
"
      uid=5_167 StaticText "    {"
      uid=5_168 StaticText "
"
      uid=5_169 StaticText "        if"
      uid=5_170 StaticText " ("
      uid=5_171 StaticText "obj"
      uid=5_172 StaticText " is "
      uid=5_173 StaticText "null"
      uid=5_174 StaticText " ||"
      uid=5_175 StaticText " obj"
      uid=5_176 StaticText "."
      uid=5_177 StaticText "GetType"
      uid=5_178 StaticText "() "
      uid=5_179 StaticText "!="
      uid=5_180 StaticText " GetType"
      uid=5_181 StaticText "()) "
      uid=5_182 StaticText "return"
      uid=5_183 StaticText " false"
      uid=5_184 StaticText ";"
      uid=5_185 StaticText "
"
      uid=5_186 StaticText "        return"
      uid=5_187 StaticText " Equals"
      uid=5_188 StaticText "(("
      uid=5_189 StaticText "ValueObject"
      uid=5_190 StaticText ")"
      uid=5_191 StaticText "obj"
      uid=5_192 StaticText ");"
      uid=5_193 StaticText "
"
      uid=5_194 StaticText "    }"
      uid=5_195 StaticText "
"
      uid=5_196 StaticText "    "
      uid=5_197 StaticText "
"
      uid=5_198 StaticText "    public"
      uid=5_199 StaticText " bool"
      uid=5_200 StaticText " Equals"
      uid=5_201 StaticText "("
      uid=5_202 StaticText "ValueObject"
      uid=5_203 StaticText "? "
      uid=5_204 StaticText "other"
      uid=5_205 StaticText ")"
      uid=5_206 StaticText "
"
      uid=5_207 StaticText "    {"
      uid=5_208 StaticText "
"
      uid=5_209 StaticText "        if"
      uid=5_210 StaticText " ("
      uid=5_211 StaticText "other"
      uid=5_212 StaticText " is "
      uid=5_213 StaticText "null"
      uid=5_214 StaticText ") "
      uid=5_215 StaticText "return"
      uid=5_216 StaticText " false"
      uid=5_217 StaticText ";"
      uid=5_218 StaticText "
"
      uid=5_219 StaticText "        // Compare sequences of values"
      uid=5_220 StaticText "
"
      uid=5_221 StaticText "        return"
      uid=5_222 StaticText " GetEqualityComponents"
      uid=5_223 StaticText "()."
      uid=5_224 StaticText "SequenceEqual"
      uid=5_225 StaticText "("
      uid=5_226 StaticText "other"
      uid=5_227 StaticText "."
      uid=5_228 StaticText "GetEqualityComponents"
      uid=5_229 StaticText "());"
      uid=5_230 StaticText "
"
      uid=5_231 StaticText "    }"
      uid=5_232 StaticText "
"
      uid=5_233 StaticText "    "
      uid=5_234 StaticText "
"
      uid=5_235 StaticText "    public"
      uid=5_236 StaticText " override"
      uid=5_237 StaticText " int"
      uid=5_238 StaticText " GetHashCode"
      uid=5_239 StaticText "()"
      uid=5_240 StaticText "
"
      uid=5_241 StaticText "    {"
      uid=5_242 StaticText "
"
      uid=5_243 StaticText "        return"
      uid=5_244 StaticText " GetEqualityComponents"
      uid=5_245 StaticText "()"
      uid=5_246 StaticText "
"
      uid=5_247 StaticText "            ."
      uid=5_248 StaticText "Aggregate"
      uid=5_249 StaticText "("
      uid=5_250 StaticText "0"
      uid=5_251 StaticText ", ("
      uid=5_252 StaticText "hash"
      uid=5_253 StaticText ", "
      uid=5_254 StaticText "component"
      uid=5_255 StaticText ") => "
      uid=5_256 StaticText "HashCode"
      uid=5_257 StaticText "."
      uid=5_258 StaticText "Combine"
      uid=5_259 StaticText "("
      uid=5_260 StaticText "hash"
      uid=5_261 StaticText ", "
      uid=5_262 StaticText "component"
      uid=5_263 StaticText "));"
      uid=5_264 StaticText "
"
      uid=5_265 StaticText "    }"
      uid=5_266 StaticText "
"
      uid=5_267 StaticText "    "
      uid=5_268 StaticText "
"
      uid=5_269 StaticText "    // Operator overloads for clean syntax: if (a == b)"
      uid=5_270 StaticText "
"
      uid=5_271 StaticText "    public"
      uid=5_272 StaticText " static"
      uid=5_273 StaticText " bool"
      uid=5_274 StaticText " operator"
      uid=5_275 StaticText " =="
      uid=5_276 StaticText "("
      uid=5_277 StaticText "ValueObject"
      uid=5_278 StaticText "? "
      uid=5_279 StaticText "left"
      uid=5_280 StaticText ", "
      uid=5_281 StaticText "ValueObject"
      uid=5_282 StaticText "? "
      uid=5_283 StaticText "right"
      uid=5_284 StaticText ")"
      uid=5_285 StaticText "
"
      uid=5_286 StaticText "    {"
      uid=5_287 StaticText "
"
      uid=5_288 StaticText "        if"
      uid=5_289 StaticText " ("
      uid=5_290 StaticText "left"
      uid=5_291 StaticText " is "
      uid=5_292 StaticText "null"
      uid=5_293 StaticText " &&"
      uid=5_294 StaticText " right"
      uid=5_295 StaticText " is "
      uid=5_296 StaticText "null"
      uid=5_297 StaticText ") "
      uid=5_298 StaticText "return"
      uid=5_299 StaticText " true"
      uid=5_300 StaticText ";"
      uid=5_301 StaticText "
"
      uid=5_302 StaticText "        if"
      uid=5_303 StaticText " ("
      uid=5_304 StaticText "left"
      uid=5_305 StaticText " is "
      uid=5_306 StaticText "null"
      uid=5_307 StaticText " ||"
      uid=5_308 StaticText " right"
      uid=5_309 StaticText " is "
      uid=5_310 StaticText "null"
      uid=5_311 StaticText ") "
      uid=5_312 StaticText "return"
      uid=5_313 StaticText " false"
      uid=5_314 StaticText ";"
      uid=5_315 StaticText "
"
      uid=5_316 StaticText "        return"
      uid=5_317 StaticText " left"
      uid=5_318 StaticText "."
      uid=5_319 StaticText "Equals"
      uid=5_320 StaticText "("
      uid=5_321 StaticText "right"
      uid=5_322 StaticText ");"
      uid=5_323 StaticText "
"
      uid=5_324 StaticText "    }"
      uid=5_325 StaticText "
"
      uid=5_326 StaticText "    "
      uid=5_327 StaticText "
"
      uid=5_328 StaticText "    public"
      uid=5_329 StaticText " static"
      uid=5_330 StaticText " bool"
      uid=5_331 StaticText " operator"
      uid=5_332 StaticText " !="
      uid=5_333 StaticText "("
      uid=5_334 StaticText "ValueObject"
      uid=5_335 StaticText "? "
      uid=5_336 StaticText "left"
      uid=5_337 StaticText ", "
      uid=5_338 StaticText "ValueObject"
      uid=5_339 StaticText "? "
      uid=5_340 StaticText "right"
      uid=5_341 StaticText ") => "
      uid=5_342 StaticText "!"
      uid=5_343 StaticText "("
      uid=5_344 StaticText "left"
      uid=5_345 StaticText " =="
      uid=5_346 StaticText " right"
      uid=5_347 StaticText ");"
      uid=5_348 StaticText "
"
      uid=5_349 StaticText "}"
    uid=5_350 heading "Implementing a Value Object" level="2"
    uid=5_351 StaticText "Here is a concrete example of a "
    uid=5_352 StaticText "BlueRobinId"
    uid=5_353 StaticText ", a custom identifier format used throughout the system. It enforces length and character set rules at creation."
    uid=5_354 generic
      uid=5_355 StaticText "// Core/Domain/Common/BlueRobinId.cs"
      uid=5_356 StaticText "
"
      uid=5_357 StaticText "public"
      uid=5_358 StaticText " class"
      uid=5_359 StaticText " BlueRobinId"
      uid=5_360 StaticText " : "
      uid=5_361 StaticText "ValueObject"
      uid=5_362 StaticText "
"
      uid=5_363 StaticText "{"
      uid=5_364 StaticText "
"
      uid=5_365 StaticText "    public"
      uid=5_366 StaticText " string"
      uid=5_367 StaticText " Value"
      uid=5_368 StaticText " { "
      uid=5_369 StaticText "get"
      uid=5_370 StaticText "; }"
      uid=5_371 StaticText "
"
      uid=5_372 StaticText "
"
      uid=5_373 StaticText "    // Private constructor ensures enforcement of the factory method"
      uid=5_374 StaticText "
"
      uid=5_375 StaticText "    private"
      uid=5_376 StaticText " BlueRobinId"
      uid=5_377 StaticText "("
      uid=5_378 StaticText "string"
      uid=5_379 StaticText " value"
      uid=5_380 StaticText ") => "
      uid=5_381 StaticText "Value"
      uid=5_382 StaticText " ="
      uid=5_383 StaticText " value"
      uid=5_384 StaticText ";"
      uid=5_385 StaticText "
"
      uid=5_386 StaticText "
"
      uid=5_387 StaticText "    public"
      uid=5_388 StaticText " static"
      uid=5_389 StaticText " Result"
      uid=5_390 StaticText "<"
      uid=5_391 StaticText "BlueRobinId"
      uid=5_392 StaticText "> "
      uid=5_393 StaticText "Create"
      uid=5_394 StaticText "("
      uid=5_395 StaticText "string"
      uid=5_396 StaticText "? "
      uid=5_397 StaticText "value"
      uid=5_398 StaticText ")"
      uid=5_399 StaticText "
"
      uid=5_400 StaticText "    {"
      uid=5_401 StaticText "
"
      uid=5_402 StaticText "        if"
      uid=5_403 StaticText " ("
      uid=5_404 StaticText "string"
      uid=5_405 StaticText "."
      uid=5_406 StaticText "IsNullOrWhiteSpace"
      uid=5_407 StaticText "("
      uid=5_408 StaticText "value"
      uid=5_409 StaticText "))"
      uid=5_410 StaticText "
"
      uid=5_411 StaticText "            return"
      uid=5_412 StaticText " Result"
      uid=5_413 StaticText "."
      uid=5_414 StaticText "Failure"
      uid=5_415 StaticText "<"
      uid=5_416 StaticText "BlueRobinId"
      uid=5_417 StaticText ">("
      uid=5_418 StaticText "DomainErrors"
      uid=5_419 StaticText "."
      uid=5_420 StaticText "General"
      uid=5_421 StaticText "."
      uid=5_422 StaticText "Required"
      uid=5_423 StaticText "("
      uid=5_424 StaticText ""BlueRobinId""
      uid=5_425 StaticText "));"
      uid=5_426 StaticText "
"
      uid=5_427 StaticText "
"
      uid=5_428 StaticText "        var"
      uid=5_429 StaticText " normalized"
      uid=5_430 StaticText " ="
      uid=5_431 StaticText " value"
      uid=5_432 StaticText "."
      uid=5_433 StaticText "Trim"
      uid=5_434 StaticText "()."
      uid=5_435 StaticText "ToLowerInvariant"
      uid=5_436 StaticText "();"
      uid=5_437 StaticText "
"
      uid=5_438 StaticText "
"
      uid=5_439 StaticText "        if"
      uid=5_440 StaticText " ("
      uid=5_441 StaticText "normalized"
      uid=5_442 StaticText "."
      uid=5_443 StaticText "Length"
      uid=5_444 StaticText " !="
      uid=5_445 StaticText " 8"
      uid=5_446 StaticText " ||"
      uid=5_447 StaticText " !"
      uid=5_448 StaticText "normalized"
      uid=5_449 StaticText "."
      uid=5_450 StaticText "All"
      uid=5_451 StaticText "("
      uid=5_452 StaticText "char"
      uid=5_453 StaticText "."
      uid=5_454 StaticText "IsLetterOrDigit"
      uid=5_455 StaticText "))"
      uid=5_456 StaticText "
"
      uid=5_457 StaticText "            return"
      uid=5_458 StaticText " Result"
      uid=5_459 StaticText "."
      uid=5_460 StaticText "Failure"
      uid=5_461 StaticText "<"
      uid=5_462 StaticText "BlueRobinId"
      uid=5_463 StaticText ">("
      uid=5_464 StaticText "DomainErrors"
      uid=5_465 StaticText "."
      uid=5_466 StaticText "BlueRobinId"
      uid=5_467 StaticText "."
      uid=5_468 StaticText "InvalidFormat"
      uid=5_469 StaticText ");"
      uid=5_470 StaticText "
"
      uid=5_471 StaticText "
"
      uid=5_472 StaticText "        return"
      uid=5_473 StaticText " Result"
      uid=5_474 StaticText "."
      uid=5_475 StaticText "Success"
      uid=5_476 StaticText "(new "
      uid=5_477 StaticText "BlueRobinId"
      uid=5_478 StaticText "("
      uid=5_479 StaticText "normalized"
      uid=5_480 StaticText "));"
      uid=5_481 StaticText "
"
      uid=5_482 StaticText "    }"
      uid=5_483 StaticText "
"
      uid=5_484 StaticText "
"
      uid=5_485 StaticText "    // Structural equality component"
      uid=5_486 StaticText "
"
      uid=5_487 StaticText "    protected"
      uid=5_488 StaticText " override"
      uid=5_489 StaticText " IEnumerable"
      uid=5_490 StaticText "<"
      uid=5_491 StaticText "object"
      uid=5_492 StaticText "?> "
      uid=5_493 StaticText "GetEqualityComponents"
      uid=5_494 StaticText "()"
      uid=5_495 StaticText "
"
      uid=5_496 StaticText "    {"
      uid=5_497 StaticText "
"
      uid=5_498 StaticText "        yield"
      uid=5_499 StaticText " return"
      uid=5_500 StaticText " Value"
      uid=5_501 StaticText ";"
      uid=5_502 StaticText "
"
      uid=5_503 StaticText "    }"
      uid=5_504 StaticText "
"
      uid=5_505 StaticText "
"
      uid=5_506 StaticText "    // Implicit conversion for ease of use (optional)"
      uid=5_507 StaticText "
"
      uid=5_508 StaticText "    public"
      uid=5_509 StaticText " static"
      uid=5_510 StaticText " implicit"
      uid=5_511 StaticText " operator"
      uid=5_512 StaticText " string"
      uid=5_513 StaticText "("
      uid=5_514 StaticText "BlueRobinId"
      uid=5_515 StaticText " id"
      uid=5_516 StaticText ") => "
      uid=5_517 StaticText "id"
      uid=5_518 StaticText "."
      uid=5_519 StaticText "Value"
      uid=5_520 StaticText ";"
      uid=5_521 StaticText "
"
      uid=5_522 StaticText "    "
      uid=5_523 StaticText "
"
      uid=5_524 StaticText "    public"
      uid=5_525 StaticText " override"
      uid=5_526 StaticText " string"
      uid=5_527 StaticText " ToString"
      uid=5_528 StaticText "() => "
      uid=5_529 StaticText "Value"
      uid=5_530 StaticText ";"
      uid=5_531 StaticText "
"
      uid=5_532 StaticText "}"
    uid=5_533 StaticText "üí° Implementation Note:"
    uid=5_534 StaticText "We use a "
    uid=5_535 StaticText "Factory Method"
    uid=5_536 StaticText " ("
    uid=5_537 StaticText "Create"
    uid=5_538 StaticText ") and a "
    uid=5_539 StaticText "Private Constructor"
    uid=5_540 StaticText ". This ensures that no instance of "
    uid=5_541 StaticText "BlueRobinId"
    uid=5_542 StaticText " can ever exist in an invalid state."
    uid=5_543 heading "Complex Value Objects" level="2"
    uid=5_544 StaticText "Value objects can contain multiple properties. Consider a "
    uid=5_545 StaticText "DocumentHash"
    uid=5_546 StaticText " that stores both the hashing algorithm and the hash value."
    uid=5_547 generic
      uid=5_548 StaticText "public"
      uid=5_549 StaticText " class"
      uid=5_550 StaticText " DocumentHash"
      uid=5_551 StaticText " : "
      uid=5_552 StaticText "ValueObject"
      uid=5_553 StaticText "
"
      uid=5_554 StaticText "{"
      uid=5_555 StaticText "
"
      uid=5_556 StaticText "    public"
      uid=5_557 StaticText " string"
      uid=5_558 StaticText " Hash"
      uid=5_559 StaticText " { "
      uid=5_560 StaticText "get"
      uid=5_561 StaticText "; }"
      uid=5_562 StaticText "
"
      uid=5_563 StaticText "    public"
      uid=5_564 StaticText " string"
      uid=5_565 StaticText " Algorithm"
      uid=5_566 StaticText " { "
      uid=5_567 StaticText "get"
      uid=5_568 StaticText "; }"
      uid=5_569 StaticText "
"
      uid=5_570 StaticText "
"
      uid=5_571 StaticText "    private"
      uid=5_572 StaticText " DocumentHash"
      uid=5_573 StaticText "("
      uid=5_574 StaticText "string"
      uid=5_575 StaticText " hash"
      uid=5_576 StaticText ", "
      uid=5_577 StaticText "string"
      uid=5_578 StaticText " algorithm"
      uid=5_579 StaticText ")"
      uid=5_580 StaticText "
"
      uid=5_581 StaticText "    {"
      uid=5_582 StaticText "
"
      uid=5_583 StaticText "        Hash"
      uid=5_584 StaticText " ="
      uid=5_585 StaticText " hash"
      uid=5_586 StaticText ";"
      uid=5_587 StaticText "
"
      uid=5_588 StaticText "        Algorithm"
      uid=5_589 StaticText " ="
      uid=5_590 StaticText " algorithm"
      uid=5_591 StaticText ";"
      uid=5_592 StaticText "
"
      uid=5_593 StaticText "    }"
      uid=5_594 StaticText "
"
      uid=5_595 StaticText "
"
      uid=5_596 StaticText "    public"
      uid=5_597 StaticText " static"
      uid=5_598 StaticText " Result"
      uid=5_599 StaticText "<"
      uid=5_600 StaticText "DocumentHash"
      uid=5_601 StaticText "> "
      uid=5_602 StaticText "Create"
      uid=5_603 StaticText "("
      uid=5_604 StaticText "string"
      uid=5_605 StaticText " hash"
      uid=5_606 StaticText ", "
      uid=5_607 StaticText "string"
      uid=5_608 StaticText " algorithm"
      uid=5_609 StaticText ")"
      uid=5_610 StaticText "
"
      uid=5_611 StaticText "    {"
      uid=5_612 StaticText "
"
      uid=5_613 StaticText "        if"
      uid=5_614 StaticText " ("
      uid=5_615 StaticText "string"
      uid=5_616 StaticText "."
      uid=5_617 StaticText "IsNullOrWhiteSpace"
      uid=5_618 StaticText "("
      uid=5_619 StaticText "hash"
      uid=5_620 StaticText "))"
      uid=5_621 StaticText "
"
      uid=5_622 StaticText "            return"
      uid=5_623 StaticText " Result"
      uid=5_624 StaticText "."
      uid=5_625 StaticText "Failure"
      uid=5_626 StaticText "<"
      uid=5_627 StaticText "DocumentHash"
      uid=5_628 StaticText ">("
      uid=5_629 StaticText "DomainErrors"
      uid=5_630 StaticText "."
      uid=5_631 StaticText "General"
      uid=5_632 StaticText "."
      uid=5_633 StaticText "Required"
      uid=5_634 StaticText "("
      uid=5_635 StaticText ""Hash""
      uid=5_636 StaticText "));"
      uid=5_637 StaticText "
"
      uid=5_638 StaticText "            "
      uid=5_639 StaticText "
"
      uid=5_640 StaticText "        // Validate specifically for SHA256 length (64 chars)"
      uid=5_641 StaticText "
"
      uid=5_642 StaticText "        if"
      uid=5_643 StaticText " ("
      uid=5_644 StaticText "algorithm"
      uid=5_645 StaticText " =="
      uid=5_646 StaticText " "SHA256""
      uid=5_647 StaticText " &&"
      uid=5_648 StaticText " hash"
      uid=5_649 StaticText "."
      uid=5_650 StaticText "Length"
      uid=5_651 StaticText " !="
      uid=5_652 StaticText " 64"
      uid=5_653 StaticText ")"
      uid=5_654 StaticText "
"
      uid=5_655 StaticText "             return"
      uid=5_656 StaticText " Result"
      uid=5_657 StaticText "."
      uid=5_658 StaticText "Failure"
      uid=5_659 StaticText "<"
      uid=5_660 StaticText "DocumentHash"
      uid=5_661 StaticText ">("
      uid=5_662 StaticText "DomainErrors"
      uid=5_663 StaticText "."
      uid=5_664 StaticText "Document"
      uid=5_665 StaticText "."
      uid=5_666 StaticText "InvalidHash"
      uid=5_667 StaticText ");"
      uid=5_668 StaticText "
"
      uid=5_669 StaticText "
"
      uid=5_670 StaticText "        return"
      uid=5_671 StaticText " Result"
      uid=5_672 StaticText "."
      uid=5_673 StaticText "Success"
      uid=5_674 StaticText "(new "
      uid=5_675 StaticText "DocumentHash"
      uid=5_676 StaticText "("
      uid=5_677 StaticText "hash"
      uid=5_678 StaticText ", "
      uid=5_679 StaticText "algorithm"
      uid=5_680 StaticText "));"
      uid=5_681 StaticText "
"
      uid=5_682 StaticText "    }"
      uid=5_683 StaticText "
"
      uid=5_684 StaticText "
"
      uid=5_685 StaticText "    protected"
      uid=5_686 StaticText " override"
      uid=5_687 StaticText " IEnumerable"
      uid=5_688 StaticText "<"
      uid=5_689 StaticText "object"
      uid=5_690 StaticText "?> "
      uid=5_691 StaticText "GetEqualityComponents"
      uid=5_692 StaticText "()"
      uid=5_693 StaticText "
"
      uid=5_694 StaticText "    {"
      uid=5_695 StaticText "
"
      uid=5_696 StaticText "        yield"
      uid=5_697 StaticText " return"
      uid=5_698 StaticText " Hash"
      uid=5_699 StaticText ";"
      uid=5_700 StaticText "
"
      uid=5_701 StaticText "        yield"
      uid=5_702 StaticText " return"
      uid=5_703 StaticText " Algorithm"
      uid=5_704 StaticText ";"
      uid=5_705 StaticText "
"
      uid=5_706 StaticText "    }"
      uid=5_707 StaticText "
"
      uid=5_708 StaticText "}"
    uid=5_709 heading "EF Core Configuration" level="2"
    uid=5_710 StaticText "To map Value Objects to the database, we use the "
    uid=5_711 StaticText "OwnsOne"
    uid=5_712 StaticText " configuration in EF Core. This maps the value object‚Äôs properties to columns in the owning entity‚Äôs table (‚ÄúTable Splitting‚Äù)."
    uid=5_713 generic
      uid=5_714 StaticText "// Infrastructure/Persistence/Configurations/DocumentConfiguration.cs"
      uid=5_715 StaticText "
"
      uid=5_716 StaticText "public"
      uid=5_717 StaticText " void"
      uid=5_718 StaticText " Configure"
      uid=5_719 StaticText "("
      uid=5_720 StaticText "EntityTypeBuilder"
      uid=5_721 StaticText "<"
      uid=5_722 StaticText "Document"
      uid=5_723 StaticText "> "
      uid=5_724 StaticText "builder"
      uid=5_725 StaticText ")"
      uid=5_726 StaticText "
"
      uid=5_727 StaticText "{"
      uid=5_728 StaticText "
"
      uid=5_729 StaticText "    // Mapping BlueRobinId"
      uid=5_730 StaticText "
"
      uid=5_731 StaticText "    builder"
      uid=5_732 StaticText "."
      uid=5_733 StaticText "Property"
      uid=5_734 StaticText "("
      uid=5_735 StaticText "d"
      uid=5_736 StaticText " => "
      uid=5_737 StaticText "d"
      uid=5_738 StaticText "."
      uid=5_739 StaticText "OwnerId"
      uid=5_740 StaticText ")"
      uid=5_741 StaticText "
"
      uid=5_742 StaticText "        ."
      uid=5_743 StaticText "HasConversion"
      uid=5_744 StaticText "("
      uid=5_745 StaticText "
"
      uid=5_746 StaticText "            id"
      uid=5_747 StaticText " => "
      uid=5_748 StaticText "id"
      uid=5_749 StaticText "."
      uid=5_750 StaticText "Value"
      uid=5_751 StaticText ",                  "
      uid=5_752 StaticText "// To Database"
      uid=5_753 StaticText "
"
      uid=5_754 StaticText "            value"
      uid=5_755 StaticText " ="
      uid=5_756 StaticText ">"
      uid=5_757 StaticText " BlueRobinId"
      uid=5_758 StaticText "."
      uid=5_759 StaticText "Create"
      uid=5_760 StaticText "("
      uid=5_761 StaticText "value"
      uid=5_762 StaticText ")."
      uid=5_763 StaticText "Value"
      uid=5_764 StaticText ") "
      uid=5_765 StaticText "// From Database"
      uid=5_766 StaticText "
"
      uid=5_767 StaticText "        ."
      uid=5_768 StaticText "HasColumnName"
      uid=5_769 StaticText "("
      uid=5_770 StaticText ""owner_id""
      uid=5_771 StaticText ")"
      uid=5_772 StaticText "
"
      uid=5_773 StaticText "        ."
      uid=5_774 StaticText "IsRequired"
      uid=5_775 StaticText "();"
      uid=5_776 StaticText "
"
      uid=5_777 StaticText "
"
      uid=5_778 StaticText "    // Mapping Complex Value Object (Owned Type)"
      uid=5_779 StaticText "
"
      uid=5_780 StaticText "    builder"
      uid=5_781 StaticText "."
      uid=5_782 StaticText "OwnsOne"
      uid=5_783 StaticText "("
      uid=5_784 StaticText "d"
      uid=5_785 StaticText " => "
      uid=5_786 StaticText "d"
      uid=5_787 StaticText "."
      uid=5_788 StaticText "Checksum"
      uid=5_789 StaticText ", "
      uid=5_790 StaticText "hash"
      uid=5_791 StaticText " =>"
      uid=5_792 StaticText "
"
      uid=5_793 StaticText "    {"
      uid=5_794 StaticText "
"
      uid=5_795 StaticText "        hash"
      uid=5_796 StaticText "."
      uid=5_797 StaticText "Property"
      uid=5_798 StaticText "("
      uid=5_799 StaticText "h"
      uid=5_800 StaticText " => "
      uid=5_801 StaticText "h"
      uid=5_802 StaticText "."
      uid=5_803 StaticText "Hash"
      uid=5_804 StaticText ")."
      uid=5_805 StaticText "HasColumnName"
      uid=5_806 StaticText "("
      uid=5_807 StaticText ""hash""
      uid=5_808 StaticText ")."
      uid=5_809 StaticText "IsRequired"
      uid=5_810 StaticText "();"
      uid=5_811 StaticText "
"
      uid=5_812 StaticText "        hash"
      uid=5_813 StaticText "."
      uid=5_814 StaticText "Property"
      uid=5_815 StaticText "("
      uid=5_816 StaticText "h"
      uid=5_817 StaticText " => "
      uid=5_818 StaticText "h"
      uid=5_819 StaticText "."
      uid=5_820 StaticText "Algorithm"
      uid=5_821 StaticText ")."
      uid=5_822 StaticText "HasColumnName"
      uid=5_823 StaticText "("
      uid=5_824 StaticText ""hash_algo""
      uid=5_825 StaticText ")."
      uid=5_826 StaticText "IsRequired"
      uid=5_827 StaticText "();"
      uid=5_828 StaticText "
"
      uid=5_829 StaticText "        "
      uid=5_830 StaticText "
"
      uid=5_831 StaticText "        // Important: Indexing can be applied to owned type properties"
      uid=5_832 StaticText "
"
      uid=5_833 StaticText "        hash"
      uid=5_834 StaticText "."
      uid=5_835 StaticText "HasIndex"
      uid=5_836 StaticText "("
      uid=5_837 StaticText "h"
      uid=5_838 StaticText " => "
      uid=5_839 StaticText "h"
      uid=5_840 StaticText "."
      uid=5_841 StaticText "Hash"
      uid=5_842 StaticText "); "
      uid=5_843 StaticText "
"
      uid=5_844 StaticText "    });"
      uid=5_845 StaticText "
"
      uid=5_846 StaticText "}"
    uid=5_847 StaticText "‚ö†Ô∏è"
    uid=5_848 StaticText "Warning"
    uid=5_849 StaticText "Equality Warning"
    uid=5_850 StaticText ": EF Core tracks Owned Types by reference, not value. Modifying a property of an owned type is technically replacing the immutable object conceptually, but EF needs to detect the change. Since our VOs are immutable, always "
    uid=5_851 StaticText "replace"
    uid=5_852 StaticText " the entire instance: "
    uid=5_853 StaticText "doc.UpdateChecksum(DocumentHash.Create(...))"
    uid=5_854 StaticText "."
    uid=5_855 heading "Conclusion" level="2"
    uid=5_856 StaticText "Value Objects are essential for creating a domain model that is expressive, safe, and easy to maintain. By encapsulating validation and behavior, they prevent ‚Äúgarbage data‚Äù from ever entering your system and make your code more self-documenting."
    uid=5_857 link "ddd" url="http://localhost:4321/tags/ddd/"
      uid=5_858 StaticText "ddd"
    uid=5_859 link "csharp" url="http://localhost:4321/tags/csharp/"
      uid=5_860 StaticText "csharp"
    uid=5_861 link "dotnet" url="http://localhost:4321/tags/dotnet/"
      uid=5_862 StaticText "dotnet"
    uid=5_863 link "value-objects" url="http://localhost:4321/tags/value-objects/"
      uid=5_864 StaticText "value-objects"
    uid=5_865 link "design-patterns" url="http://localhost:4321/tags/design-patterns/"
      uid=5_866 StaticText "design-patterns"
    uid=5_867 link "‚Üê Back to Blog" url="http://localhost:4321/blog/"
      uid=5_868 StaticText "‚Üê Back to Blog"
    uid=5_869 link "More in this series ‚Üí" url="http://localhost:4321/tags/[object%20Object]/"
      uid=5_870 StaticText "More in this series ‚Üí"
  uid=5_871 contentinfo
    uid=5_872 link "BR BlueRobin Tech Blog" url="http://localhost:4321/"
      uid=5_873 StaticText "BR"
      uid=5_874 StaticText "BlueRobin Tech Blog"
    uid=5_875 StaticText "A homelab journey from medical document search to production AI. Sharing lessons learned building BlueRobin‚Äîa personal document management system with .NET, Kubernetes, and LLM integration."
    uid=5_876 heading "Quick Links" level="3"
    uid=5_877 link "All Articles" url="http://localhost:4321/blog/"
      uid=5_878 StaticText "All Articles"
    uid=5_879 link "Cookbook" url="http://localhost:4321/cookbook/"
      uid=5_880 StaticText "Cookbook"
    uid=5_881 link "Browse by Tag" url="http://localhost:4321/tags/"
      uid=5_882 StaticText "Browse by Tag"
    uid=5_883 link "About" url="http://localhost:4321/about/"
      uid=5_884 StaticText "About"
    uid=5_885 heading "Series" level="3"
    uid=5_886 link "DDD in .NET" url="http://localhost:4321/tags/ddd-series/"
      uid=5_887 StaticText "DDD in .NET"
    uid=5_888 link "NATS Messaging" url="http://localhost:4321/tags/nats-series/"
      uid=5_889 StaticText "NATS Messaging"
    uid=5_890 link "AI/LLM Integration" url="http://localhost:4321/tags/ai-series/"
      uid=5_891 StaticText "AI/LLM Integration"
    uid=5_892 link "GitOps with Flux" url="http://localhost:4321/tags/gitops-series/"
      uid=5_893 StaticText "GitOps with Flux"
    uid=5_894 StaticText "¬© 2026 Victor Robin. All rights reserved."
    uid=5_895 link "Github" description="Victor on Github" url="https://github.com/victorrentea"
      uid=5_896 StaticText "Github"
    uid=5_897 link "LinkedIn" description="Victor on LinkedIn" url="https://linkedin.com/in/victorrentea"
      uid=5_898 StaticText "LinkedIn"
    uid=5_899 link "Mail" description="Send an email" url="mailto:victor@bluerobin.local"
      uid=5_900 StaticText "Mail"
  uid=5_901 button "Menu"
  uid=5_902 button "Inspect"
  uid=5_903 button "Audit"
  uid=5_904 button "Settings"
